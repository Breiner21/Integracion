{
  "version": 3,
  "sources": ["../../src/dev/demo/state.ts"],
  "sourcesContent": ["import { PublicKeyCredentialWithAttestationJSON } from \"../../webauthn-json/basic/json\";\n\nexport function getRegistrations(): PublicKeyCredentialWithAttestationJSON[] {\n  const registrations = JSON.parse(\n    localStorage.webauthnExampleRegistrations || \"[]\",\n  );\n  return registrations;\n}\n\nexport function setRegistrations(\n  registrations: PublicKeyCredentialWithAttestationJSON[],\n  display: boolean = true,\n): void {\n  localStorage.webauthnExampleRegistrations = JSON.stringify(\n    registrations,\n    null,\n    \"  \",\n  );\n  displayRegistrations();\n}\n\nexport function saveRegistration(\n  registration: PublicKeyCredentialWithAttestationJSON,\n): void {\n  const registrations = getRegistrations();\n  registrations.push(registration);\n  setRegistrations(registrations);\n}\n\nfunction registrationElem(): HTMLTextAreaElement {\n  return document.querySelector(\"#registrations\")! as HTMLTextAreaElement;\n}\n\nexport function displayRegistrations() {\n  registrationElem().value = JSON.stringify(getRegistrations(), null, \"  \");\n}\n\nexport function withStatus(selector: string, fn: () => Promise<void>) {\n  return async function () {\n    document.querySelector(\"#error\")!.textContent = \"\";\n    document.querySelector(selector)!.textContent = \"\u2026\";\n    try {\n      await fn();\n      document.querySelector(selector)!.textContent = \" \u2705\";\n    } catch (e) {\n      document.querySelector(selector)!.textContent = \" \u274C\";\n      console.error(e);\n      document.querySelector(\"#error\")!.textContent = e;\n    }\n  };\n}\n\nasync function saveInput(): Promise<void> {\n  document.querySelector(\"#error\")!.textContent = \"\";\n  registrationElem().style.backgroundColor = \"rgba(255, 127, 0, 0.5)\";\n  try {\n    setRegistrations(JSON.parse(registrationElem().value), false);\n    registrationElem().style.backgroundColor = \"rgba(0, 255, 0, 0.5)\";\n  } catch (e) {\n    registrationElem().style.backgroundColor = \"rgba(255, 0, 0, 0.5)\";\n    console.error(e);\n    document.querySelector(\"#error\")!.textContent = e;\n  }\n}\n\nwindow.addEventListener(\"load\", () => {\n  try {\n    displayRegistrations();\n    registrationElem().addEventListener(\"keyup\", saveInput);\n    registrationElem().addEventListener(\"change\", saveInput);\n    registrationElem().addEventListener(\"paste\", saveInput);\n  } catch (e) {\n    console.error(e);\n  }\n});\n"],
  "mappings": "AAEO,YAAsE,CAI3E,MAHsB,MAAK,MACzB,aAAa,8BAAgC,MAK1C,WACL,EACA,EAAmB,GACb,CACN,aAAa,6BAA+B,KAAK,UAC/C,EACA,KACA,MAEF,IAGK,WACL,EACM,CACN,GAAM,GAAgB,IACtB,EAAc,KAAK,GACnB,EAAiB,GAGnB,YAAiD,CAC/C,MAAO,UAAS,cAAc,kBAGzB,YAAgC,CACrC,IAAmB,MAAQ,KAAK,UAAU,IAAoB,KAAM,MAG/D,WAAoB,EAAkB,EAAyB,CACpE,MAAO,iBAAkB,CACvB,SAAS,cAAc,UAAW,YAAc,GAChD,SAAS,cAAc,GAAW,YAAc,SAChD,GAAI,CACF,KAAM,KACN,SAAS,cAAc,GAAW,YAAc,gBACzC,EAAP,CACA,SAAS,cAAc,GAAW,YAAc,UAChD,QAAQ,MAAM,GACd,SAAS,cAAc,UAAW,YAAc,IAKtD,kBAA0C,CACxC,SAAS,cAAc,UAAW,YAAc,GAChD,IAAmB,MAAM,gBAAkB,yBAC3C,GAAI,CACF,EAAiB,KAAK,MAAM,IAAmB,OAAQ,IACvD,IAAmB,MAAM,gBAAkB,6BACpC,EAAP,CACA,IAAmB,MAAM,gBAAkB,uBAC3C,QAAQ,MAAM,GACd,SAAS,cAAc,UAAW,YAAc,GAIpD,OAAO,iBAAiB,OAAQ,IAAM,CACpC,GAAI,CACF,IACA,IAAmB,iBAAiB,QAAS,GAC7C,IAAmB,iBAAiB,SAAU,GAC9C,IAAmB,iBAAiB,QAAS,SACtC,EAAP,CACA,QAAQ,MAAM",
  "names": []
}
