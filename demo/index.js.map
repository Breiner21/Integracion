{
  "version": 3,
  "sources": ["../../../src/webauthn-json/basic/supported.ts", "../../../src/webauthn-json/browser-ponyfill.ts", "../../../src/dev/demo/index.ts"],
  "sourcesContent": ["// This function does a simple check to test for the credential management API\n// functions we need, and an indication of public key credential authentication\n// support.\n// https://developers.google.com/web/updates/2018/03/webauthn-credential-management\n\nexport function supported(): boolean {\n  return !!(\n    navigator.credentials &&\n    navigator.credentials.create &&\n    navigator.credentials.get &&\n    window.PublicKeyCredential\n  );\n}\n", "import {\n  createRequestFromJSON as parseCreationOptionsFromJSON,\n  createResponseToJSON,\n  getRequestFromJSON as parseRequestOptionsFromJSON,\n  getResponseToJSON,\n} from \"./basic/api\";\nimport { supported } from \"./basic/supported\";\n\nimport {\n  CredentialCreationOptionsJSON,\n  CredentialRequestOptionsJSON,\n  PublicKeyCredentialWithAssertionJSON as AuthenticationResponseJSON,\n  PublicKeyCredentialWithAttestationJSON as RegistrationResponseJSON,\n} from \"./basic/json\";\n\nexport { parseCreationOptionsFromJSON, parseRequestOptionsFromJSON, supported };\nexport type {\n  CredentialCreationOptionsJSON,\n  CredentialRequestOptionsJSON,\n  AuthenticationResponseJSON,\n  RegistrationResponseJSON,\n};\n\nexport interface RegistrationPublicKeyCredential extends PublicKeyCredential {\n  toJSON(): RegistrationResponseJSON;\n}\n\nexport async function create(\n  options: CredentialCreationOptions,\n): Promise<RegistrationPublicKeyCredential> {\n  const response = (await navigator.credentials.create(\n    options,\n  )) as RegistrationPublicKeyCredential;\n  response.toJSON = () => createResponseToJSON(response);\n  return response;\n}\n\nexport interface AuthenticationPublicKeyCredential extends PublicKeyCredential {\n  toJSON(): AuthenticationResponseJSON;\n}\n\nexport async function get(\n  options: CredentialRequestOptions,\n): Promise<AuthenticationPublicKeyCredential> {\n  const response = (await navigator.credentials.get(\n    options,\n  )) as AuthenticationPublicKeyCredential;\n  response.toJSON = () => getResponseToJSON(response);\n  return response;\n}\n", "// A minimal example to test `webauthn-json`.\n// Note: do not hardcode values in production.\n\nimport { type PublicKeyCredentialDescriptorJSON } from \"../../webauthn-json\";\nimport {\n  getRegistrations,\n  saveRegistration,\n  setRegistrations,\n  withStatus,\n} from \"./state\";\nimport {\n  parseCreationOptionsFromJSON,\n  create,\n  get,\n  parseRequestOptionsFromJSON,\n  supported,\n} from \"../../webauthn-json/browser-ponyfill\";\n\nfunction registeredCredentials(): PublicKeyCredentialDescriptorJSON[] {\n  return getRegistrations().map((reg) => ({\n    id: reg.rawId,\n    type: reg.type,\n  }));\n}\n\nasync function register(): Promise<void> {\n  const cco = parseCreationOptionsFromJSON({\n    publicKey: {\n      challenge: \"CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC\",\n      rp: { name: \"Localhost, Inc.\" },\n      user: {\n        id: \"IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII\",\n        name: \"test_user\",\n        displayName: \"Test User\",\n      },\n      pubKeyCredParams: [],\n      excludeCredentials: registeredCredentials(),\n      authenticatorSelection: { userVerification: \"discouraged\" },\n      extensions: {\n        credProps: true,\n      },\n    },\n  });\n  saveRegistration(await create(cco));\n}\n\nasync function authenticate(): Promise<void> {\n  const cro = parseRequestOptionsFromJSON({\n    publicKey: {\n      challenge: \"CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC\",\n      allowCredentials: registeredCredentials(),\n      userVerification: \"discouraged\",\n    },\n  });\n  await get(cro);\n}\n\nasync function clear(): Promise<void> {\n  setRegistrations([]);\n}\n\nasync function testSupported() {\n  document.querySelector(\"#supported .status\")!.textContent = \"\u2026\";\n  document.querySelector(\"#supported .status\")!.textContent = supported()\n    ? \" \u2705\"\n    : \" \u274C\";\n}\n\nwindow.addEventListener(\"load\", () => {\n  try {\n    document\n      .querySelector(\"#register\")!\n      .addEventListener(\"click\", withStatus(\"#register .status\", register));\n    document\n      .querySelector(\"#authenticate\")!\n      .addEventListener(\n        \"click\",\n        withStatus(\"#authenticate .status\", authenticate),\n      );\n    document\n      .querySelector(\"#clear\")!\n      .addEventListener(\"click\", withStatus(\"#clear .status\", clear));\n    document\n      .querySelector(\"#supported\")!\n      .addEventListener(\"click\", testSupported);\n  } catch (e) {\n    console.error(e);\n  }\n});\n"],
  "mappings": "uHAKO,YAA8B,CACnC,MAAO,CAAC,CACN,WAAU,aACV,UAAU,YAAY,QACtB,UAAU,YAAY,KACtB,OAAO,qBCiBX,iBACE,EAC0C,CAC1C,GAAM,GAAY,KAAM,WAAU,YAAY,OAC5C,GAEF,SAAS,OAAS,IAAM,EAAqB,GACtC,EAOT,iBACE,EAC4C,CAC5C,GAAM,GAAY,KAAM,WAAU,YAAY,IAC5C,GAEF,SAAS,OAAS,IAAM,EAAkB,GACnC,EC9BT,YAAsE,CACpE,MAAO,KAAmB,IAAI,AAAC,GAAS,EACtC,GAAI,EAAI,MACR,KAAM,EAAI,QAId,kBAAyC,CACvC,GAAM,GAAM,EAA6B,CACvC,UAAW,CACT,UAAW,8CACX,GAAI,CAAE,KAAM,mBACZ,KAAM,CACJ,GAAI,8CACJ,KAAM,YACN,YAAa,aAEf,iBAAkB,GAClB,mBAAoB,IACpB,uBAAwB,CAAE,iBAAkB,eAC5C,WAAY,CACV,UAAW,OAIjB,EAAiB,KAAM,GAAO,IAGhC,kBAA6C,CAC3C,GAAM,GAAM,EAA4B,CACtC,UAAW,CACT,UAAW,8CACX,iBAAkB,IAClB,iBAAkB,iBAGtB,KAAM,GAAI,GAGZ,kBAAsC,CACpC,EAAiB,IAGnB,kBAA+B,CAC7B,SAAS,cAAc,sBAAuB,YAAc,SAC5D,SAAS,cAAc,sBAAuB,YAAc,IACxD,UACA,UAGN,OAAO,iBAAiB,OAAQ,IAAM,CACpC,GAAI,CACF,SACG,cAAc,aACd,iBAAiB,QAAS,EAAW,oBAAqB,IAC7D,SACG,cAAc,iBACd,iBACC,QACA,EAAW,wBAAyB,IAExC,SACG,cAAc,UACd,iBAAiB,QAAS,EAAW,iBAAkB,IAC1D,SACG,cAAc,cACd,iBAAiB,QAAS,SACtB,EAAP,CACA,QAAQ,MAAM",
  "names": []
}
