import{b as l,c as h,e as d,f as p,g as u,h as m,i as C,k as x}from"./chunk-ZQY3Y6HS.js";import{a as v}from"./chunk-T36Q4X3B.js";var E=navigator.credentials?.create.bind(navigator.credentials),g=navigator.credentials?.get.bind(navigator.credentials);navigator.credentials||(navigator.credentials={});var i=class extends HTMLElement{constructor(){super();this.shadow=this.attachShadow({mode:"closed"});let e=document.createElement("style");e.textContent=v,this.shadow.appendChild(e),this.contentWrapper=document.createElement("div"),this.contentWrapper.classList.add("wrapper"),this.shadow.appendChild(this.contentWrapper),this.header=document.createElement("div"),this.header.textContent="WebAuthn Request",this.header.classList.add("header"),this.contentWrapper.appendChild(this.header),this.controls=document.createElement("div"),this.controls.classList.add("controls"),this.contentWrapper.appendChild(this.controls),this.textareaWrapper=document.createElement("div"),this.textareaWrapper.classList.add("textarea-wrapper"),this.contentWrapper.appendChild(this.textareaWrapper),this.textarea=document.createElement("textarea"),this.textareaWrapper.appendChild(this.textarea),this.closeButton=document.createElement("button"),this.closeButton.textContent="Close",this.closeButton.addEventListener("click",()=>{document.body.removeChild(this),this.close&&this.close()}),this.controls.appendChild(this.closeButton);let t=document.createElement("button");t.textContent="Copy JSON",t.addEventListener("click",()=>{navigator.clipboard.writeText(this.textarea.value),t.textContent="Copied!",setTimeout(()=>{t.textContent="Copy JSON"},1e3)}),this.controls.appendChild(t),document.body.appendChild(this)}async create(e){return new Promise((t,o)=>{this.close=()=>{o("WebAuthn inspector closed")};let c=h(l,C,e);this.header.textContent="WebAuthn Create Request",this.textarea.value=JSON.stringify(c,null,"  "),this.opButton=document.createElement("button"),this.opButton.textContent="Create",this.opButton.addEventListener("click",async()=>{try{let n=JSON.parse(this.textarea.value),r=d(n),a=await E(r);this.success("Create",p(a)),this.closeButton.textContent="Respond",this.close=()=>{t(a)}}catch(n){this.failure("Create",n),this.close=()=>{o(n)}}}),this.controls.appendChild(this.opButton)})}async get(e){return new Promise((t,o)=>{this.close=()=>{o("WebAuthn inspector closed")};let c=h(l,x,e);this.header.textContent="WebAuthn Get Request",this.textarea.value=JSON.stringify(c,null,"  "),this.opButton=document.createElement("button"),this.opButton.textContent="Get",this.opButton.addEventListener("click",async()=>{try{let n=JSON.parse(this.textarea.value),r=u(n);console.log(r);let a=await g(r);this.success("Get",m(a)),this.closeButton.textContent="Respond",this.close=()=>{t(a)}}catch(n){this.failure("Get",n),this.close=()=>{o(n)}}}),this.controls.appendChild(this.opButton)})}success(e,t){this.controls.removeChild(this.opButton),this.header.textContent=`\u2705 WebAuthn ${e} Response`,this.contentWrapper.classList.add("success"),this.textarea.value=JSON.stringify(t,null,"  ")}failure(e,t){this.controls.removeChild(this.opButton),this.header.textContent=`\u274C WebAuthn ${e} Response`,this.contentWrapper.classList.add("failure"),this.textarea.value=t.toString()}};customElements.define("webauthn-inspector",i);navigator.credentials.create=async function(s){return console.log(s),await new i().create(s)};navigator.credentials.get=async function(s){return await new i().get(s)};console.log("WebAuthn Inspector is active!");export{i as a};
//# sourceMappingURL=chunk-Y53TTRTS.js.map
